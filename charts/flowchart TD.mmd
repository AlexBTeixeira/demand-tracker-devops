---
title: Demand Tracker - DevOps Pipeline & AWS Architecture
---
flowchart TD
    %% Estilo das seÃ§Ãµes
    classDef devSection fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef ciSection fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef awsSection fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef storageSection fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef networkSection fill:#fff9c4,stroke:#f9a825,stroke-width:2px
    
    %% SEÃ‡ÃƒO DESENVOLVIMENTO
    subgraph DEV [" ğŸ’» Development Environment"]
        direction TB
        PUSH[("ğŸ”„ Code Push<br/>main branch")]
        PR[("ğŸ”€ Pull Request<br/>to main")]
    end
    
    %% SEÃ‡ÃƒO CI/CD PIPELINE
    subgraph CI [" ğŸš€ CI/CD Pipeline (GitHub Actions)"]
        direction TB
        TRIGGER{{"âš¡ Trigger<br/>Push or PR"}}
        CHECKOUT[("ğŸ“¥ 1. Checkout<br/>Repository")]
        PYTHON[("ğŸ 2. Setup<br/>Python 3.9")]
        DEPS[("ğŸ“¦ 3. Install<br/>Dependencies")]
        LINT[("ğŸ” 4. Flake8<br/>Code Analysis")]
        TEST[("ğŸ§ª 5. Pytest<br/>Unit Tests")]
        
        TRIGGER --> CHECKOUT
        CHECKOUT --> PYTHON
        PYTHON --> DEPS
        DEPS --> LINT
        LINT --> TEST
    end
    
    %% SEÃ‡ÃƒO AWS INFRASTRUCTURE
    subgraph AWS [" â˜ï¸ AWS Infrastructure (CloudFormation)"]
        direction TB
        
        %% Networking
        subgraph NET [" ğŸŒ VPC Network"]
            VPC[("ğŸ¢ VPC<br/>10.0.0.0/16")]
            IGW[("ğŸŒ Internet<br/>Gateway")]
            PUB_SUB[("ğŸ“¡ Public Subnet<br/>10.0.1.0/24<br/>us-east-1a")]
            PRIV_A[("ğŸ”’ Private Subnet A<br/>10.0.2.0/24<br/>us-east-1a")]
            PRIV_B[("ğŸ”’ Private Subnet B<br/>10.0.3.0/24<br/>us-east-1b")]
        end
        
        %% Security
        subgraph SEC [" ğŸ›¡ï¸ Security Groups"]
            EC2_SG[("âš¡ EC2 Security<br/>SSH:22 + App:5050")]
            RDS_SG[("ğŸ—„ï¸ RDS Security<br/>MySQL:3306")]
        end
        
        %% Compute
        subgraph COMP [" ğŸ’» Compute"]
            EC2[("ğŸ–¥ï¸ EC2 Instance<br/>t2.micro<br/>Amazon Linux 2")]
        end
        
        %% Storage & Database
        subgraph STOR [" ğŸ’¾ Storage & Database"]
            S3[("ğŸ“ S3 Bucket<br/>demand-tracker<br/>-attachments")]
            RDS[("ğŸ—„ï¸ RDS MySQL<br/>db.t3.micro<br/>demandtrackerdb")]
        end
    end
    
    %% APLICAÃ‡ÃƒO
    subgraph APP [" ğŸŒ Application Stack"]
        direction TB
        FLASK[("ğŸ Flask App<br/>wsgi.py")]
        GUNICORN[("âš™ï¸ Gunicorn<br/>Worker: 3<br/>Port: 5050")]
        SYSTEMD[("ğŸ”„ Systemd<br/>Service")]
    end
    
    %% CONEXÃ•ES ENTRE SEÃ‡Ã•ES
    DEV --> CI
    PUSH --> TRIGGER
    PR --> TRIGGER
    
    TEST --> |"âœ… Success"| AWS
    
    %% CONEXÃ•ES AWS INTERNAS
    VPC -.-> PUB_SUB
    VPC -.-> PRIV_A
    VPC -.-> PRIV_B
    IGW --> PUB_SUB
    
    EC2 --> PUB_SUB
    RDS --> PRIV_A
    RDS --> PRIV_B
    
    EC2_SG --> EC2
    RDS_SG --> RDS
    EC2_SG --> RDS_SG
    
    %% CONEXÃ•ES DA APLICAÃ‡ÃƒO
    EC2 --> APP
    FLASK --> GUNICORN
    GUNICORN --> SYSTEMD
    
    %% CONEXÃ•ES DE DADOS
    EC2 --> |"MySQL Connection"| RDS
    EC2 --> |"File Upload"| S3
    
    %% ACESSO EXTERNO
    INTERNET[("ğŸŒ Internet<br/>Users")]
    INTERNET --> |"HTTP:5050"| EC2
    
    %% Aplicar estilos
    class DEV,PUSH,PR devSection
    class CI,TRIGGER,CHECKOUT,PYTHON,DEPS,LINT,TEST ciSection
    class AWS,NET,SEC,COMP awsSection
    class STOR,S3,RDS storageSection
    class VPC,IGW,PUB_SUB,PRIV_A,PRIV_B,EC2_SG,RDS_SG,EC2 networkSection
    
    %% Notas importantes
    NOTE1[("ğŸ’¡ Deploy automatizado via<br/>UserData script<br/>GitHub PAT auth")]
    NOTE2[("âš ï¸ LimitaÃ§Ãµes AWS Academy:<br/>- Sem Secrets Manager<br/>- Perfil IAM fixo")]
    
    AWS -.-> NOTE1
    AWS -.-> NOTE2